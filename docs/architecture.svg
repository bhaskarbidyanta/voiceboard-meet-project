<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="780" viewBox="0 0 1200 780">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2b6cb0" />
    </marker>
    <style>
      .box { rx:10; ry:10; fill:#ffffff; stroke:#cbd5e1; stroke-width:2 }
      .title { font: bold 16px Arial, sans-serif; fill:#0f172a }
      .label { font: 12px Arial, sans-serif; fill:#0f172a }
      .small { font: 11px Arial, sans-serif; fill:#334155 }
      .service { fill:#f8fafc; stroke:#93c5fd }
      .external { fill:#fff7ed; stroke:#fca5a5 }
      .db { fill:#ecfccb; stroke:#84cc16 }
    </style>
  </defs>

  <!-- FRONTEND -->
  <g transform="translate(40,30)">
    <rect class="box" width="420" height="180" />
    <text x="18" y="28" class="title">Frontend (React + Vite)</text>
    <text x="18" y="52" class="small">Files: index.html, main.jsx, pages, components, styles.css</text>

    <g transform="translate(18,70)">
      <rect class="service" width="180" height="90" rx="8" ry="8" />
      <text x="10" y="24" class="label">UI &amp; Pages</text>
      <text x="10" y="40" class="small">Meetings.jsx, Transcripts.jsx</text>
    </g>

    <g transform="translate(210,70)">
      <rect class="service" width="180" height="90" rx="8" ry="8" />
      <text x="10" y="24" class="label">Client Services</text>
      <text x="10" y="40" class="small">api.js (Axios), socket client</text>
    </g>

    <!-- Browser icon -->
    <g transform="translate(340,10)">
      <rect x="0" y="0" width="70" height="42" rx="6" ry="6" style="fill:#eef2ff; stroke:#3b82f6; stroke-width:2"/>
      <text x="9" y="26" class="label">Browser</text>
    </g>
  </g>

  <!-- ARROW: Frontend -> Backend API -->
  <line x1="460" y1="120" x2="620" y2="120" stroke="#2b6cb0" stroke-width="2" marker-end="url(#arrow)" />
  <text x="512" y="110" class="small">HTTP REST / WebSocket</text>

  <!-- BACKEND -->
  <g transform="translate(620,30)">
    <rect class="box" width="520" height="420" />
    <text x="18" y="28" class="title">Backend (Node.js + Express)</text>

    <!-- Routes box -->
    <g transform="translate(18,50)">
      <rect width="160" height="140" rx="8" ry="8" style="fill:#f1f5f9; stroke:#94a3b8;" />
      <text x="10" y="22" class="label">Routes</text>
      <text x="10" y="40" class="small">/users, /api/meetings, /api/transcript, /api/debug</text>
    </g>

    <!-- Services box -->
    <g transform="translate(200,50)">
      <rect width="280" height="200" rx="8" ry="8" style="fill:#fff; stroke:#a78bfa;" />
      <text x="12" y="22" class="label">Services</text>
      <text x="12" y="44" class="small">geminiService (LLM parsing)</text>
      <text x="12" y="64" class="small">emailService (Mailgun / SMTP / no-op)</text>
      <text x="12" y="84" class="small">scheduler, notificationScheduler</text>
      <text x="12" y="104" class="small">socket (socket.io)</text>
    </g>

    <!-- Models DB box -->
    <g transform="translate(18,210)">
      <rect width="462" height="160" rx="8" ry="8" style="fill:#f8fafc; stroke:#6ee7b7;" />
      <text x="10" y="22" class="label">Models &amp; Persistence</text>
      <text x="10" y="44" class="small">Mongoose models: User, Meeting, Transcript</text>
      <text x="10" y="64" class="small">Scripts &amp; Tests: jest, supertest, mongodb-memory-server</text>
    </g>
  </g>

  <!-- ARROWS: Backend services -> DB and External -->
  <line x1="690" y1="360" x2="560" y2="520" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow)" />
  <text x="596" y="440" class="small">Mongoose / MongoDB</text>

  <!-- DB box -->
  <rect x="480" y="520" width="200" height="120" class="db" rx="8" ry="8" />
  <text x="500" y="550" class="label">MongoDB Atlas</text>
  <text x="500" y="570" class="small">Collections: users, meetings, transcripts</text>

  <!-- External Integrations to the right -->
  <rect x="880" y="160" width="260" height="120" class="external" rx="8" ry="8" />
  <text x="900" y="188" class="label">External Services</text>
  <text x="900" y="208" class="small">Gemini (LLM API)</text>
  <text x="900" y="228" class="small">Mailgun (HTTP API / SMTP)</text>
  <text x="900" y="248" class="small">Optional: SMTP (Gmail)</text>

  <line x1="760" y1="214" x2="880" y2="214" stroke="#f97316" stroke-width="2" marker-end="url(#arrow)" />
  <text x="754" y="198" class="small">LLM requests (geminiService)</text>

  <line x1="760" y1="248" x2="880" y2="248" stroke="#f43f5e" stroke-width="2" marker-end="url(#arrow)" />
  <text x="762" y="234" class="small">Email send (emailService)</text>

  <!-- Socket connections to frontend -->
  <line x1="520" y1="110" x2="460" y2="110" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow)" />
  <text x="470" y="95" class="small">Socket.io (real-time events)</text>

  <!-- Legend -->
  <rect x="40" y="620" width="1120" height="120" rx="8" ry="8" style="fill:#fff; stroke:#e2e8f0" />
  <text x="60" y="640" class="label">Legend</text>
  <text x="60" y="660" class="small">• Frontend: React/Vite · Client sockets and API calls</text>
  <text x="60" y="678" class="small">• Backend: Express routes · Services · Models · Socket.io · Scheduler</text>
  <text x="60" y="696" class="small">• External: Gemini (LLM), Mailgun / SMTP for email delivery</text>

</svg>